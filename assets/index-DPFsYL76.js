import{r as s,M as T,j as a}from"./index-D-SJopeZ.js";import{u as b,S as x,T as v,D as w,M as E,A as M,g as N}from"./addTaskModal-ByDdUS4M.js";import{C as y}from"./card-C7g1Hfl8.js";const O=()=>{const{data:d,setData:h}=s.useContext(T),[c,i]=s.useState([]),[n,r]=s.useState([]),[g,m]=s.useState(!0),[u,p]=s.useState(""),[D,o]=s.useState(""),j=s.useCallback((t=c,e=u)=>[...t].filter(l=>l?.title?.toLowerCase?.()?.includes(e?.toLowerCase?.())),[n,u]),C=b(t=>{const{value:e}=t?.target||{};if(p(e?.trim?.()),!e?.trim?.()){r([...c]);return}const l=j(c,e);r([...l])},500),S=t=>{const e=document?.getElementById("search-bar");e&&(e.value="");const l=[{...t,id:N()},...d];h(l),i(l?.filter(f=>f?.status===x?.COMPLETED)),r(l?.filter(f=>f?.status===x?.COMPLETED)),p(""),o(!1)};return s.useEffect(()=>{if(m(!0),!d?.length)return;const t=d?.filter(e=>e?.status===x.COMPLETED);i(t),r(t),m(!1)},[]),g?a.jsx(a.Fragment,{children:"Loading..."}):a.jsxs("div",{className:"flex w-full flex-1 flex-col gap-2 overflow-hidden",children:[a.jsx(v,{handleSearch:C,setOpenModal:o}),a.jsx(y,{className:"relative flex-1 overflow-y-auto",children:a.jsxs("div",{className:"relative mt-3 flex flex-col gap-3",children:[!!u&&a.jsxs("span",{className:"text-sm font-bold",children:["Search result(",n?.length,")"]}),a.jsx("div",{className:"flex w-full flex-wrap justify-between gap-3",children:n?.length?n?.map(t=>a.jsx(w,{task:t,showEditButton:!1,handleDeleteClick:()=>{h([...d].filter(e=>e?.id!==t?.id)),i([...c].filter(e=>e?.id!==t?.id)),r([...n].filter(e=>e?.id!==t?.id))}},t?.id)):a.jsxs("div",{className:"flex h-50 w-full flex-col items-center justify-center gap-5",children:[a.jsx("span",{children:" No tasks available, please add one "}),a.jsx("button",{onClick:()=>{o(!0)},className:"flex items-center gap-1 rounded-[4px] bg-blue-500 px-2 py-1 font-semibold text-white",children:"+ Add task"})]})})]})}),a.jsx(E,{onClose:()=>{o(!1)},isOpen:D,children:a.jsx(M,{handleAddButton:S,handleCancelModal:()=>{o(!1)}})})]})};export{O as default};
